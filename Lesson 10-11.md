Домашнее задание № 10-11
Mittre At&ck / Re&ct / D3fence
1 Вы – хакер находящийся в интернете, вам необходимо
проникнуть внутрь инфраструктуры и скомпрометировать 2
цели. 1-ая компьютер глав буха компании 2-ая ноутбук
системного администратора. Применяя матрицу Att&ck.
Разработать план защиты и план реагирования на атаку, которую вы
провели гипотетически в предыдущем задании. Используя матрицы
D3fence и Re&ct
p.s. У вас есть базы данных, AD DC, Cisco ASA, FTP / NFC servers, Wi-Fi
routers, Web server ISS/ Nginx, внешние и внутренние ресурсы


![image](https://github.com/user-attachments/assets/e1e16f1d-22d0-4269-90c1-f6ad9cb08298)



### 1. Проникновение в инфраструктуру и компрометация двух целей

#### Цель 1: Скомпрометировать компьютер главного бухгалтера

Основной целью может быть доступ к финансовой информации компании. Рассмотрим план атаки на основе MITRE ATT&CK, который включает следующие этапы:

- **Reconnaissance (Разведка)**:
  - Используйте методы сбора информации, такие как OSINT (поиск открытых данных в интернете), чтобы выявить возможные векторы атаки. Например, выявление электронной почты бухгалтера или других его данных, которые можно использовать для фишинговой атаки.

- **Initial Access (Первичный доступ)**:
  - Фишинговая атака с использованием вредоносной ссылки или вложения. Письмо может содержать, например, обновления финансовых программ или документы, которые вызывают доверие.
  - Другие методы: эксплойт уязвимостей в системе или использование уязвимого программного обеспечения на устройстве бухгалтера.

- **Execution (Исполнение)**:
  - Запуск вредоносного ПО после открытия фишингового письма, которое предоставит доступ к устройству.
  - Возможен запуск PowerShell-скриптов для дальнейшего взаимодействия с системой.

- **Persistence (Закрепление)**:
  - Установка бекдора или создание скрытого учетного аккаунта для поддержания длительного доступа к системе.

- **Privilege Escalation (Эскалация привилегий)**:
  - Попытка получить административные права на компьютере бухгалтера через эксплуатацию локальных уязвимостей.

- **Exfiltration (Эксплитация)**:
  - Кража данных, таких как финансовые отчеты и бухгалтерская информация, и их передача через внешние серверы.

#### Цель 2: Скомпрометировать ноутбук системного администратора

Здесь основной задачей является получение доступа к важной инфраструктуре компании, например, к Active Directory.

- **Reconnaissance (Разведка)**:
  - Поиск данных о системном администраторе: его учетные записи, должностные обязанности и используемые системы.
  - Можно применить методы социальной инженерии для получения необходимых данных.

- **Initial Access (Первичный доступ)**:
  - Использование ранее полученной информации или уязвимостей сети, таких как атаки на уязвимый Wi-Fi роутер или фишинговая атака на администратора.

- **Lateral Movement (Боковое перемещение)**:
  - Использование полученного доступа для перемещения по сети с помощью RDP или других административных инструментов, таких как PsExec.

- **Credential Dumping (Извлечение учетных данных)**:
  - Сбор паролей и учетных данных, скомпрометировав локальные или сетевые сервисы.

- **Impact (Влияние)**:
  - Доступ к ключевым элементам инфраструктуры, таким как AD DC, базы данных и сетевые устройства, например, Cisco ASA.

### 2. План защиты и реагирования на атаку

Теперь нужно разработать план защиты и реагирования с использованием **D3fense** и **Re&ct**, которые сосредоточены на методах предотвращения и реагирования на кибератаки.


#### План защиты (D3fense):

1. **Защита сетевой инфраструктуры**:
   - Настройка фильтров на сетевых устройствах, таких как **Cisco ASA**, чтобы ограничить доступ к критическим системам только с доверенных IP-адресов.
   - Внедрение правил межсетевого экрана для блокировки подозрительного трафика.
   - Использование VPN для защиты удаленного доступа.

2. **Защита учетных данных и доступа**:
   - Внедрение **многофакторной аутентификации (MFA)** для доступа к критическим системам (например, Active Directory).
   - Регулярная смена паролей и ограничение прав доступа на устройствах, таких как ноутбук системного администратора.

3. **Защита конечных точек (Endpoint Protection)**:
   - Использование антивирусных и EDR решений (Endpoint Detection and Response) для мониторинга активности на компьютере бухгалтера и ноутбуке администратора.
   - Контроль доступа к веб-ресурсам и ограничение возможности загружать вредоносные файлы.

4. **Обучение сотрудников**:
   - Периодическое обучение сотрудников компании методам защиты от фишинга и другим атакам социальной инженерии.

5. **Мониторинг и аудит**:
   - Включение логирования действий пользователей и сетевого трафика с помощью инструментов SIEM (Security Information and Event Management).
   - Настройка мониторинга трафика через **Nginx** или другие веб-сервера для выявления подозрительных действий.

#### План реагирования (Re&ct):

1. **Обнаружение атаки**:
   - Внедрение систем мониторинга сетевой активности и использования уязвимостей для быстрого обнаружения необычного поведения (например, попытки бокового перемещения в сети).
   - Оповещения и создание системы тревог при аномальных действиях с использованием SIEM.

2. **Изоляция зараженных систем**:
   - При обнаружении компрометации немедленно изолировать компьютер бухгалтера и ноутбук системного администратора от сети.
   - Отключение учетных записей и смена паролей на критических сервисах, таких как Active Directory.

3. **Анализ и восстановление**:
   - Проведение анализа инцидента с использованием forensic-инструментов для выяснения, какие данные были скомпрометированы.
   - Восстановление систем из резервных копий, если было установлено вредоносное ПО или изменены системные файлы.

4. **Улучшение защиты после атаки**:
   - Внедрение обновленных политик безопасности, основанных на уроках, извлеченных из инцидента.
   - Повторная проверка всех учетных записей и систем на наличие других возможных угроз.

Эти шаги помогут вам как гипотетически провести атаку, так и разработать план защиты и реагирования на неё.
